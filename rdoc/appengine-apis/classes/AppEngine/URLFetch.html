<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: AppEngine::URLFetch</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">AppEngine::URLFetch</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/appengine-apis/urlfetch_rb.html">
                lib/appengine-apis/urlfetch.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
The <a href="URLFetch.html">URLFetch</a> Service provides a way for user
code to execute <a href="URLFetch/HTTP.html">HTTP</a> requests to external
URLs.
</p>
<p>
Chunked and hanging requests are not supported, and all content will be
returned in a single block.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000053">fetch</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">

    <div id="class-list">
      <h3 class="section-bar">Classes and Modules</h3>

      Class <a href="URLFetch/DownloadError.html" class="link">AppEngine::URLFetch::DownloadError</a><br />
Class <a href="URLFetch/HTTP.html" class="link">AppEngine::URLFetch::HTTP</a><br />
Class <a href="URLFetch/InvalidURLError.html" class="link">AppEngine::URLFetch::InvalidURLError</a><br />
Class <a href="URLFetch/ResponseTooLargeError.html" class="link">AppEngine::URLFetch::ResponseTooLargeError</a><br />

    </div>




      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000053" class="method-detail">
        <a name="M000053"></a>

        <div class="method-heading">
          <a href="#M000053" class="method-signature">
          <span class="method-name">fetch</span><span class="method-args">(url, options={})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Fetches the given <a href="URLFetch/HTTP.html">HTTP</a> URL, blocking until
the result is returned.
</p>
<pre>
 Supported options:
 [:method] GET, POST, HEAD, PUT, or DELETE
 [:payload] POST or PUT payload (implies method is not GET, HEAD,
           or DELETE)
 [:headers]
    HTTP headers to send with the request. May be a Hash or
    Net::HTTPHeaders.
 [:allow_truncated]
    if true, truncate large responses and return them
    without error. otherwise, ResponseTooLargeError will be thrown when a
    response is truncated.
 [:follow_redirects]
     if true (the default), redirects are transparently followed and the
     response (if less than 5 redirects) contains the final destination's
     payload and the response status is 200.  You lose, however, the
     redirect chaininformation.  If false, you see the HTTP response
     yourself, including the 'Location' header, and redirects are not
     followed.

 Returns a Net::HTTPResponse.

 Throws:
 - InvalidURLError if the provided url is malformed.
 - DownloadError if the remote service could not be contacted or the URL
   could not be fetched.
 - ResponseTooLargeError if response truncation has been disabled  and the
   response is too large. Some responses are too large to even retrieve
   from the remote server, and in these cases the exception is thrown even
   if response truncation is enabled.
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000053-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000053-source">
<pre>
<span class="ruby-comment cmt"># File lib/appengine-apis/urlfetch.rb, line 79</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fetch</span>(<span class="ruby-identifier">url</span>, <span class="ruby-identifier">options</span>={})
      <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_urlfetch_request</span>(<span class="ruby-identifier">url</span>, <span class="ruby-identifier">options</span>)
      <span class="ruby-keyword kw">begin</span>
        <span class="ruby-identifier">java_response</span> = <span class="ruby-identifier">urlfetch_service</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-identifier">request</span>)
        <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">convert_urlfetch_body</span>(<span class="ruby-identifier">java_response</span>)
      <span class="ruby-keyword kw">rescue</span> <span class="ruby-identifier">java</span>.<span class="ruby-identifier">lang</span>.<span class="ruby-constant">IllegalArgumentException</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>
      <span class="ruby-keyword kw">rescue</span> <span class="ruby-identifier">java</span>.<span class="ruby-identifier">net</span>.<span class="ruby-constant">MalformedURLException</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidURLError</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>
      <span class="ruby-keyword kw">rescue</span> <span class="ruby-identifier">java</span>.<span class="ruby-identifier">io</span>.<span class="ruby-constant">IOException</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">DownloadError</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>
      <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ResponseTooLargeException</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">ResponseTooLargeError</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>